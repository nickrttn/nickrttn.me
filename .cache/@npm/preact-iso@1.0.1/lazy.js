import{h as r}from"/@npm/preact";import{useState as o,useRef as t}from"/@npm/preact/hooks";function ErrorBoundary(r){return this.componentDidCatch=absorb,r.children}function absorb(r){r&&r.then?this.__d=!0:this.props.onError&&this.props.onError(r)}export default function(n){let e,i;return p=>{const[,u]=o(0),c=t(i);if(e||(e=n().then(r=>i=r&&r.default||r)),void 0!==i)return r(i,p);throw c.current||(c.current=e.then(()=>u(1))),e}}export{ErrorBoundary};